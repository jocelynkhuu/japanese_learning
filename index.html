<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Japanese Te-form Verb Quiz</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { padding: 2rem; }
    .correct { color: green; font-weight: bold; }
    .incorrect { color: red; font-weight: bold; }
  </style>
</head>
<body class="bg-light">
  <div class="container">
    <h1 class="mb-4">📘 Japanese Te-form Verb Quiz (Genki I)</h1>

    <!-- Menu -->
    <div id="menu" class="mb-3">
      <button class="btn btn-primary me-2" onclick="startQuiz()">Take a Quiz</button>
      <button class="btn btn-secondary" onclick="showList()">List All Verbs</button>
    </div>

    <!-- Quiz -->
    <div id="quiz" style="display:none;">
      <h2>Quiz</h2>
      <div class="mb-3">
        <label class="form-label">How many questions? (1–<span id="totalVerbs"></span>):</label>
        <input type="number" id="numQuestions" class="form-control w-25 d-inline-block" min="1" value="5">
        <button class="btn btn-success ms-2" onclick="generateQuiz()">Start</button>
      </div>
      <form id="quizForm" onsubmit="checkAnswers(); return false;"></form>
    </div>

    <!-- Results -->
    <div id="results" style="display:none;">
      <h2>Results</h2>
      <div id="resultsContent"></div>
      <button class="btn btn-primary mt-3" onclick="reset()">🔙 Back to Menu</button>
    </div>

    <!-- Verb List -->
    <div id="list" style="display:none;">
      <h2>All Verbs</h2>
      <table class="table table-striped table-bordered">
        <thead class="table-dark">
          <tr><th>Dict</th><th>Te-form(s)</th><th>Type</th><th>Meaning</th></tr>
        </thead>
        <tbody id="verbTable"></tbody>
      </table>
      <button class="btn btn-primary mt-3" onclick="reset()">🔙 Back to Menu</button>
    </div>
  </div>

  <script>
    // ==== Full Genki I Verbs (Kana + optional Kanji) ====
    const verbs = [
      // U-verbs
      {dict: "あう", type: "u-verb", answers: ["あって","会って"], meaning: "to meet"},
      {dict: "あそぶ", type: "u-verb", answers: ["あそんで"], meaning: "to play; spend time pleasantly"},
      {dict: "かぶる", type: "u-verb", answers: ["かぶって"], meaning: "to put on (a hat)"},
      {dict: "はく", type: "u-verb", answers: ["はいて"], meaning: "to put on (items below your waist)"},
      {dict: "しる", type: "u-verb", answers: ["しって","知って"], meaning: "to get to know"},
      {dict: "すむ", type: "u-verb", answers: ["すんで","住んで"], meaning: "to live"},
      {dict: "はたらく", type: "u-verb", answers: ["はたらいて","働いて"], meaning: "to work"},
      {dict: "ふとる", type: "u-verb", answers: ["ふとって"], meaning: "to gain weight"},
      {dict: "いく", type: "u-verb (exception)", answers: ["いって","行って"], meaning: "to go"},
      {dict: "いう", type: "u-verb", answers: ["いって","言って"], meaning: "to say"},
      {dict: "いそぐ", type: "u-verb", answers: ["いそいで","急いで"], meaning: "to hurry"},
      {dict: "うたう", type: "u-verb", answers: ["うたって","歌って"], meaning: "to sing"},
      {dict: "おどる", type: "u-verb", answers: ["おどって","踊って"], meaning: "to dance"},
      {dict: "おわる", type: "u-verb", answers: ["おわって","終わって"], meaning: "something ends"},
      {dict: "およぐ", type: "u-verb", answers: ["およいで","泳いで"], meaning: "to swim"},
      {dict: "かう", type: "u-verb", answers: ["かって","買って"], meaning: "to buy"},
      {dict: "かく", type: "u-verb", answers: ["かいて","書いて"], meaning: "to write"},
      {dict: "かえす", type: "u-verb", answers: ["かえして","返して"], meaning: "to return (a thing)"},
      {dict: "かす", type: "u-verb", answers: ["かして","貸して"], meaning: "to lend"},
      {dict: "きく", type: "u-verb", answers: ["きいて","聞いて"], meaning: "to ask; to listen"},
      {dict: "けす", type: "u-verb", answers: ["けして","消して"], meaning: "to turn off; erase"},
      {dict: "すわる", type: "u-verb", answers: ["すわって","座って"], meaning: "to sit down"},
      {dict: "たつ", type: "u-verb", answers: ["たって","立って"], meaning: "to stand up"},
      {dict: "タバコをすう", type: "u-verb", answers: ["タバコをすって"], meaning: "to smoke"},
      {dict: "つかう", type: "u-verb", answers: ["つかって","使って"], meaning: "to use"},
      {dict: "てつだう", type: "u-verb", answers: ["てつだって","手伝って"], meaning: "to help"},
      {dict: "とる", type: "u-verb", answers: ["とって","取って"], meaning: "to take"},
      {dict: "なくす", type: "u-verb", answers: ["なくして","失くして"], meaning: "to lose"},
      {dict: "のむ", type: "u-verb", answers: ["のんで","飲んで"], meaning: "to drink"},
      {dict: "しぬ", type: "u-verb", answers: ["しんで","死んで"], meaning: "to die"},
      {dict: "のる", type: "u-verb", answers: ["のって","乗って"], meaning: "to ride; to board"},
      {dict: "はいる", type: "u-verb", answers: ["はいって","入って"], meaning: "to enter"},
      {dict: "はじまる", type: "u-verb", answers: ["はじまって","始まって"], meaning: "something begins"},
      {dict: "はなす", type: "u-verb", answers: ["はなして","話して"], meaning: "to speak"},
      {dict: "はらう", type: "u-verb", answers: ["はらって","払って"], meaning: "to pay"},
      {dict: "ひく", type: "u-verb", answers: ["ひいて","弾いて"], meaning: "to play (string instrument)"},
      {dict: "もつ", type: "u-verb", answers: ["もって","持って"], meaning: "to carry; to hold"},
      {dict: "やすむ", type: "u-verb", answers: ["やすんで","休んで"], meaning: "to rest; to be absent"},
      {dict: "よむ", type: "u-verb", answers: ["よんで","読んで"], meaning: "to read"},

      // Ru-verbs
      {dict: "あける", type: "ru-verb", answers: ["あけて","開けて"], meaning: "to open (something)"},
      {dict: "あげる", type: "ru-verb", answers: ["あげて","上げて"], meaning: "to give"},
      {dict: "いる", type: "ru-verb", answers: ["いて"], meaning: "to need"},
      {dict: "おきる", type: "ru-verb", answers: ["おきて","起きて"], meaning: "to get up"},
      {dict: "おしえる", type: "ru-verb", answers: ["おしえて","教えて"], meaning: "to teach"},
      {dict: "おりる", type: "ru-verb", answers: ["おりて","降りて"], meaning: "to get off"},
      {dict: "かける", type: "ru-verb", answers: ["かけて"], meaning: "to make a phone call / put on glasses"},
      {dict: "かりる", type: "ru-verb", answers: ["かりて","借りて"], meaning: "to borrow"},
      {dict: "きる", type: "ru-verb", answers: ["きて","着て"], meaning: "to wear (above waist)"},
      {dict: "しめる", type: "ru-verb", answers: ["しめて","閉めて"], meaning: "to close (something)"},
      {dict: "つける", type: "ru-verb", answers: ["つけて"], meaning: "to turn on"},
      {dict: "でかける", type: "ru-verb", answers: ["でかけて","出かけて"], meaning: "to go out"},
      {dict: "でる", type: "ru-verb", answers: ["でて","出て"], meaning: "to leave; to attend"},
      {dict: "ねる", type: "ru-verb", answers: ["ねて","寝て"], meaning: "to sleep"},
      {dict: "みる", type: "ru-verb", answers: ["みて","見て"], meaning: "to see; to watch"},
      {dict: "わすれる", type: "ru-verb", answers: ["わすれて","忘れて"], meaning: "to forget"},
      {dict: "シャワーをあびる", type: "ru-verb", answers: ["シャワーをあびて"], meaning: "to take a shower"},
      {dict: "やせる", type: "ru-verb", answers: ["やせて"], meaning: "to lose weight"},

      // Irregular
      {dict: "くる", type: "irregular", answers: ["きて","来て"], meaning: "to come"},
      {dict: "する", type: "irregular", answers: ["して"], meaning: "to do"},
      {dict: "べんきょうする", type: "irregular", answers: ["べんきょうして","勉強して"], meaning: "to study"},
      {dict: "けっこんする", type: "irregular", answers: ["けっこんして","結婚して"], meaning: "to marry"},
      {dict: "さんぽする", type: "irregular", answers: ["さんぽして","散歩して"], meaning: "to take a walk"},
      {dict: "うんてんする", type: "irregular", answers: ["うんてんして","運転して"], meaning: "to drive"},
      {dict: "りょこうする", type: "irregular", answers: ["りょこうして","旅行して"], meaning: "to travel"},
      {dict: "そうじする", type: "irregular", answers: ["そうじして","掃除して"], meaning: "to clean"},
      {dict: "でんわする", type: "irregular", answers: ["でんわして","電話して"], meaning: "to call"},
      {dict: "つれてくる", type: "irregular", answers: ["つれてきて","連れてきて"], meaning: "to bring (a person)"},
      {dict: "もってくる", type: "irregular", answers: ["もってきて","持ってきて"], meaning: "to bring (a thing)"}
    ];

    document.getElementById("totalVerbs").textContent = verbs.length;

    function startQuiz() {
      document.getElementById("menu").style.display = "none";
      document.getElementById("quiz").style.display = "block";
    }

    function showList() {
      document.getElementById("menu").style.display = "none";
      document.getElementById("list").style.display = "block";
      const tbody = document.getElementById("verbTable");
      tbody.innerHTML = "";
      verbs.forEach(v => {
        const row = `<tr><td>${v.dict}</td><td>${v.answers.join(", ")}</td><td>${v.type}</td><td>${v.meaning}</td></tr>`;
        tbody.innerHTML += row;
      });
    }

    let currentQuestions = [];

    function generateQuiz() {
      const num = Math.min(parseInt(document.getElementById("numQuestions").value), verbs.length);
      currentQuestions = shuffle([...verbs]).slice(0, num);

      const form = document.getElementById("quizForm");
      form.innerHTML = "";
      currentQuestions.forEach((v, i) => {
        form.innerHTML += `
          <div class="mb-3">
            <label class="form-label">Q${i+1}: ${v.dict} (${v.meaning}) → te-form?</label>
            <input type="text" class="form-control" name="q${i}" data-answers='${JSON.stringify(v.answers)}'>
          </div>
        `;
      });
      form.innerHTML += `<button type="submit" class="btn btn-success">Submit Answers</button>`;
    }

    function checkAnswers() {
      let score = 0;
      let output = "";
      currentQuestions.forEach((v, i) => {
        const input = document.querySelector(`[name=q${i}]`);
        const userAnswer = input.value.trim();
        const validAnswers = JSON.parse(input.getAttribute("data-answers"));
        if (validAnswers.includes(userAnswer)) {
          score++;
          output += `<div class="alert alert-success">✅ Q${i+1}: Correct (${userAnswer})</div>`;
        } else {
          output += `<div class="alert alert-danger">❌ Q${i+1}: Your answer: "${userAnswer}"<br>Acceptable: ${validAnswers.join(", ")} (${v.type})</div>`;
        }
      });
      output += `<p class="fw-bold">Final Score: ${score}/${currentQuestions.length}</p>`;

      document.getElementById("quiz").style.display = "none";
      document.getElementById("results").style.display = "block";
      document.getElementById("resultsContent").innerHTML = output;
    }

    function reset() {
      document.getElementById("quiz").style.display = "none";
      document.getElementById("results").style.display = "none";
      document.getElementById("list").style.display = "none";
      document.getElementById("menu").style.display = "block";
    }

    // Fisher-Yates shuffle
    function shuffle(array) {
      let m = array.length, t, i;
      while (m) {
        i = Math.floor(Math.random() * m--);
        t = array[m]; array[m] = array[i]; array[i] = t;
      }
      return array;
    }
  </script>
</body>
</html>
