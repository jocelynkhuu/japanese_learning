<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Japanese Verb Quiz (Genki I)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { padding: 2rem; }
    .correct { color: green; font-weight: bold; }
    .incorrect { color: red; font-weight: bold; }
    .sticky-footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #f8f9fa;
      border-top: 1px solid #ddd;
      padding: 0.75rem;
      text-align: center;
      z-index: 1000;
    }
    h3.lesson-heading {
      margin-top: 2rem;
      padding-top: 1rem;
      border-top: 2px solid #ccc;
    }
  </style>
</head>
<body class="bg-light">
  <div class="container">
    <h1 class="mb-4">ğŸ“˜ Japanese Verb Quiz (Genki I)</h1>

    <!-- Menu -->
    <div id="menu" class="mb-3">
      <!-- Te-form Cheat Sheet -->
      <div class="card mb-4">
        <div class="card-header bg-primary text-white">
          ğŸ“– Te-form Conjugation Rules
        </div>
        <div class="card-body">
          <table class="table table-bordered table-sm text-center">
            <thead class="table-light">
              <tr>
                <th>Ending</th>
                <th>Rule â†’ ã¦-form</th>
                <th>Example</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>ã†, ã¤, ã‚‹</td>
                <td>â†’ ã£ã¦</td>
                <td>ã‚ã† â†’ ã‚ã£ã¦</td>
              </tr>
              <tr>
                <td>ã‚€, ã¶, ã¬</td>
                <td>â†’ ã‚“ã§</td>
                <td>ã®ã‚€ â†’ ã®ã‚“ã§</td>
              </tr>
              <tr>
                <td>ã</td>
                <td>â†’ ã„ã¦</td>
                <td>ãã â†’ ãã„ã¦</td>
              </tr>
              <tr>
                <td>ã</td>
                <td>â†’ ã„ã§</td>
                <td>ãŠã‚ˆã â†’ ãŠã‚ˆã„ã§</td>
              </tr>
              <tr>
                <td>ã™</td>
                <td>â†’ ã—ã¦</td>
                <td>ã¯ãªã™ â†’ ã¯ãªã—ã¦</td>
              </tr>
              <tr>
                <td>ã‚‹ (Ichidan / Ru-verbs)</td>
                <td>â†’ ã¦</td>
                <td>ãŸã¹ã‚‹ â†’ ãŸã¹ã¦</td>
              </tr>
              <tr>
                <td>Irregular</td>
                <td>
                  ã™ã‚‹ â†’ ã—ã¦ <br>
                  ãã‚‹ â†’ ãã¦ <br>
                  ã„ã â†’ ã„ã£ã¦
                </td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <button class="btn btn-primary me-2" onclick="startQuiz()">Take a Quiz</button>
      <button class="btn btn-secondary" onclick="showList()">List All Verbs</button>
    </div>

  <!-- Quiz -->
  <div id="quiz" style="display:none; position: relative; min-height: 100vh;">
    <h2>Quiz</h2>
    <div class="mb-3">
      <label class="form-label">How many questions? (1â€“<span id="totalVerbs"></span>):</label>
      <input type="number" id="numQuestions" class="form-control w-25 d-inline-block" min="1" value="5">
    </div>
    <div class="mb-3">
      <label class="form-label">Choose form to practice:</label>
      <select id="quizType" class="form-select w-25 d-inline-block">
        <option value="te">Te-form</option>
        <option value="masu">Masu-form</option>
      </select>
    </div>
    <div class="mb-3">
      <label class="form-label">Choose lesson:</label>
      <select id="lessonFilter" class="form-select w-25 d-inline-block"></select>
      <button class="btn btn-success ms-2" onclick="generateQuiz()">Start</button>
    </div>
    <div class="mb-3 form-check">
      <input type="checkbox" class="form-check-input" id="skipIrregular">
      <label class="form-check-label" for="skipIrregular">Skip irregular verbs</label>
    </div>


    <!-- Quiz questions will go here -->
    <form id="quizForm" onsubmit="checkAnswers(); return false;"></form>

    <!-- Sticky footer always visible -->
    <div class="sticky-footer">
      <button class="btn btn-primary" onclick="reset()">ğŸ”™ Back to Menu</button>
    </div>
  </div>


    <!-- Results -->
    <div id="results" style="display:none;">
      <h2>Results</h2>
      <div id="resultsContent"></div>
      <div class="sticky-footer">
        <button class="btn btn-primary" onclick="reset()">ğŸ”™ Back to Menu</button>
      </div>
    </div>

    <!-- Verb List -->
    <div id="list" style="display:none; position: relative; min-height: 100vh;">
      <h2>All Verbs by Lesson</h2>
      <div id="verbTables"></div>
      <div class="sticky-footer">
        <button class="btn btn-primary" onclick="reset()">ğŸ”™ Back to Menu</button>
      </div>
    </div>
  </div>

  <script>
    // ==== Example verbs (replace with your full list) ====
    const verbs = [
      // ==== U-verbs ====
      {dict: "ã‚ã†", kanji: "<ruby>ä¼š<rt>ã‚</rt></ruby>ã†", type: "u-verb",
      te: ["ã‚ã£ã¦","ä¼šã£ã¦"], masu: ["ã‚ã„ã¾ã™","ä¼šã„ã¾ã™"], meaning: "to meet; to see (a person)", lesson: 4},
      {dict: "ã‚ã‚‹", type: "u-verb",
      te: ["ã‚ã£ã¦"], masu: ["ã‚ã‚Šã¾ã™"], meaning: "there is... (place ã« thing ãŒ)", lesson: 4},
      {dict: "ã‚ãã¶", kanji: "<ruby>éŠ<rt>ã‚ã</rt></ruby>ã¶", type: "u-verb",
      te: ["ã‚ãã‚“ã§","éŠã‚“ã§"], masu: ["ã‚ãã³ã¾ã™","éŠã³ã¾ã™"], meaning: "to play; to spend time pleasantly", lesson: 6},
      {dict: "ã‹ã¶ã‚‹", kanji: "ã‹ã¶ã‚‹", type: "u-verb",
      te: ["ã‹ã¶ã£ã¦"], masu: ["ã‹ã¶ã‚Šã¾ã™"], meaning: "to put on (a hat) (~ã‚’)", lesson: 7},
      {dict: "ã¯ã", kanji: "ã¯ã", type: "u-verb",
      te: ["ã¯ã„ã¦"], masu: ["ã¯ãã¾ã™"], meaning: "to put on (items below waist) (~ã‚’)", lesson: 7},
      {dict: "ã—ã‚‹", kanji: "<ruby>çŸ¥<rt>ã—</rt></ruby>ã‚‹", type: "u-verb",
      te: ["ã—ã£ã¦","çŸ¥ã£ã¦"], masu: ["ã—ã‚Šã¾ã™","çŸ¥ã‚Šã¾ã™"], meaning: "to get to know (~ã‚’)", lesson: 7},
      {dict: "ã™ã‚€", kanji: "<ruby>ä½<rt>ã™</rt></ruby>ã‚€", type: "u-verb",
      te: ["ã™ã‚“ã§","ä½ã‚“ã§"], masu: ["ã™ã¿ã¾ã™","ä½ã¿ã¾ã™"], meaning: "to live", lesson: 7},
      {dict: "ã¯ãŸã‚‰ã", kanji: "<ruby>åƒ<rt>ã¯ãŸã‚‰</rt></ruby>ã", type: "u-verb",
      te: ["ã¯ãŸã‚‰ã„ã¦","åƒã„ã¦"], masu: ["ã¯ãŸã‚‰ãã¾ã™","åƒãã¾ã™"], meaning: "to work", lesson: 7},
      {dict: "ãµã¨ã‚‹", kanji: "<ruby>å¤ª<rt>ãµã¨</rt></ruby>ã‚‹", type: "u-verb",
      te: ["ãµã¨ã£ã¦","å¤ªã£ã¦"], masu: ["ãµã¨ã‚Šã¾ã™","å¤ªã‚Šã¾ã™"], meaning: "to gain weight", lesson: 7},
      {dict: "ã„ã", kanji: "<ruby>è¡Œ<rt>ã„</rt></ruby>ã", type: "u-verb (exception)",
      te: ["ã„ã£ã¦","è¡Œã£ã¦"], masu: ["ã„ãã¾ã™","è¡Œãã¾ã™"], meaning: "to go", lesson: 3},
      {dict: "ã„ã†", kanji: "<ruby>è¨€<rt>ã„</rt></ruby>ã†", type: "u-verb",
      te: ["ã„ã£ã¦","è¨€ã£ã¦"], masu: ["ã„ã„ã¾ã™","è¨€ã„ã¾ã™"], meaning: "to say", lesson: 8},
      {dict: "ã„ãã", kanji: "<ruby>æ€¥<rt>ã„ã</rt></ruby>ã", type: "u-verb",
      te: ["ã„ãã„ã§","æ€¥ã„ã§"], masu: ["ã„ããã¾ã™","æ€¥ãã¾ã™"], meaning: "to hurry", lesson: 6},
      {dict: "ã†ãŸã†", kanji: "<ruby>æ­Œ<rt>ã†ãŸ</rt></ruby>ã†", type: "u-verb",
      te: ["ã†ãŸã£ã¦","æ­Œã£ã¦"], masu: ["ã†ãŸã„ã¾ã™","æ­Œã„ã¾ã™"], meaning: "to sing (~ã‚’)", lesson: 7},
      {dict: "ãŠã©ã‚‹", kanji: "<ruby>è¸Š<rt>ãŠã©</rt></ruby>ã‚‹", type: "u-verb",
      te: ["ãŠã©ã£ã¦","è¸Šã£ã¦"], masu: ["ãŠã©ã‚Šã¾ã™","è¸Šã‚Šã¾ã™"], meaning: "to dance", lesson: 9},
      {dict: "ãŠã‚ã‚‹", kanji: "<ruby>çµ‚<rt>ãŠ</rt></ruby>ã‚ã‚‹", type: "u-verb",
      te: ["ãŠã‚ã£ã¦","çµ‚ã‚ã£ã¦"], masu: ["ãŠã‚ã‚Šã¾ã™","çµ‚ã‚ã‚Šã¾ã™"], meaning: "something ends (~ãŒ)", lesson: 9},
      {dict: "ãŠã‚ˆã", kanji: "<ruby>æ³³<rt>ãŠã‚ˆ</rt></ruby>ã", type: "u-verb",
      te: ["ãŠã‚ˆã„ã§","æ³³ã„ã§"], masu: ["ãŠã‚ˆãã¾ã™","æ³³ãã¾ã™"], meaning: "to swim", lesson: 5},
      {dict: "ã‹ã†", kanji: "<ruby>è²·<rt>ã‹</rt></ruby>ã†", type: "u-verb",
      te: ["ã‹ã£ã¦","è²·ã£ã¦"], masu: ["ã‹ã„ã¾ã™","è²·ã„ã¾ã™"], meaning: "to buy", lesson: 4},
      {dict: "ã‹ã", kanji: "<ruby>æ›¸<rt>ã‹</rt></ruby>ã", type: "u-verb",
      te: ["ã‹ã„ã¦","æ›¸ã„ã¦"], masu: ["ã‹ãã¾ã™","æ›¸ãã¾ã™"], meaning: "to write", lesson: 4},
      {dict: "ã‹ãˆã™", kanji: "<ruby>è¿”<rt>ã‹ãˆ</rt></ruby>ã™", type: "u-verb",
      te: ["ã‹ãˆã—ã¦","è¿”ã—ã¦"], masu: ["ã‹ãˆã—ã¾ã™","è¿”ã—ã¾ã™"], meaning: "to return (a thing) (person ã« thing ã‚’)", lesson: 6},
      {dict: "ã‹ã™", kanji: "<ruby>è²¸<rt>ã‹</rt></ruby>ã™", type: "u-verb",
      te: ["ã‹ã—ã¦","è²¸ã—ã¦"], masu: ["ã‹ã—ã¾ã™","è²¸ã—ã¾ã™"], meaning: "to lend"},
      {dict: "ãã", kanji: "<ruby>è<rt>ã</rt></ruby>ã", type: "u-verb",
      te: ["ãã„ã¦","èã„ã¦"], masu: ["ããã¾ã™","èãã¾ã™"], meaning: "to ask; to listen", lesson: [3, 5]},
      {dict: "ã‘ã™", kanji: "<ruby>æ¶ˆ<rt>ã‘</rt></ruby>ã™", type: "u-verb",
      te: ["ã‘ã—ã¦","æ¶ˆã—ã¦"], masu: ["ã‘ã—ã¾ã™","æ¶ˆã—ã¾ã™"], meaning: "to erase; to turn off", lesson: 6},
      {dict: "ã™ã‚ã‚‹", kanji: "<ruby>åº§<rt>ã™ã‚</rt></ruby>ã‚‹", type: "u-verb",
      te: ["ã™ã‚ã£ã¦","åº§ã£ã¦"], masu: ["ã™ã‚ã‚Šã¾ã™","åº§ã‚Šã¾ã™"], meaning: "to sit down (seat ã«)", lesson: 6},
      {dict: "ãŸã¤", kanji: "<ruby>ç«‹<rt>ãŸ</rt></ruby>ã¤", type: "u-verb",
      te: ["ãŸã£ã¦","ç«‹ã£ã¦"], masu: ["ãŸã¡ã¾ã™","ç«‹ã¡ã¾ã™"], meaning: "to stand up", lesson: 6},
      {dict: "ã¤ã‹ã†", kanji: "<ruby>ä½¿<rt>ã¤ã‹</rt></ruby>ã†", type: "u-verb",
      te: ["ã¤ã‹ã£ã¦","ä½¿ã£ã¦"], masu: ["ã¤ã‹ã„ã¾ã™","ä½¿ã„ã¾ã™"], meaning: "to use (~ã‚’)", lesson: 6},
      {dict: "ã¦ã¤ã ã†", kanji: "<ruby>æ‰‹ä¼<rt>ã¦ã¤ã </rt></ruby>ã†", type: "u-verb",
      te: ["ã¦ã¤ã ã£ã¦","æ‰‹ä¼ã£ã¦"], masu: ["ã¦ã¤ã ã„ã¾ã™","æ‰‹ä¼ã„ã¾ã™"], meaning: "to help (person/task ã‚’)", lesson: 6},
      {dict: "ã¨ã‚‹", kanji: "<ruby>å–<rt>ã¨</rt></ruby>ã‚‹", type: "u-verb",
      te: ["ã¨ã£ã¦","å–ã£ã¦"], masu: ["ã¨ã‚Šã¾ã™","å–ã‚Šã¾ã™"], meaning: "to take"},
      {dict: "ã¨ã‚‹", kanji: "<ruby>æ’®<rt>ã¨</rt></ruby>ã‚‹", type: "u-verb",
      te: ["ã¨ã£ã¦","æ’®ã£ã¦"], masu: ["ã¨ã‚Šã¾ã™","æ’®ã‚Šã¾ã™"], meaning: "to take (a picture) (~ã‚’)", lesson: 4},
      {dict: "ãªãã™", kanji: "<ruby>å¤±<rt>ãª</rt></ruby>ãã™", type: "u-verb",
      te: ["ãªãã—ã¦","å¤±ãã—ã¦"], masu: ["ãªãã—ã¾ã™","å¤±ãã—ã¾ã™"], meaning: "to lose"},
      {dict: "ã®ã‚€", kanji: "<ruby>é£²<rt>ã®</rt></ruby>ã‚€", type: "u-verb",
      te: ["ã®ã‚“ã§","é£²ã‚“ã§"], masu: ["ã®ã¿ã¾ã™","é£²ã¿ã¾ã™"], meaning: "to drink", lesson: 3},
      {dict: "ã—ã¬", kanji: "<ruby>æ­»<rt>ã—</rt></ruby>ã¬", type: "u-verb",
      te: ["ã—ã‚“ã§","æ­»ã‚“ã§"], masu: ["ã—ã«ã¾ã™","æ­»ã«ã¾ã™"], meaning: "to die", lesson: 6},
      {dict: "ã®ã‚‹", kanji: "<ruby>ä¹—<rt>ã®</rt></ruby>ã‚‹", type: "u-verb",
      te: ["ã®ã£ã¦","ä¹—ã£ã¦"], masu: ["ã®ã‚Šã¾ã™","ä¹—ã‚Šã¾ã™"], meaning: "to ride; to board (~ã«)", lesson: 5},
      {dict: "ã¯ã„ã‚‹", kanji: "<ruby>å…¥<rt>ã¯ã„</rt></ruby>ã‚‹", type: "u-verb",
      te: ["ã¯ã„ã£ã¦","å…¥ã£ã¦"], masu: ["ã¯ã„ã‚Šã¾ã™","å…¥ã‚Šã¾ã™"], meaning: "to enter (~ã«)", lesson: 6},
      {dict: "ã¯ã˜ã¾ã‚‹", kanji: "<ruby>å§‹<rt>ã¯ã˜</rt></ruby>ã¾ã‚‹", type: "u-verb",
      te: ["ã¯ã˜ã¾ã£ã¦","å§‹ã¾ã£ã¦"], masu: ["ã¯ã˜ã¾ã‚Šã¾ã™","å§‹ã¾ã‚Šã¾ã™"], meaning: "something begins"},
      {dict: "ã¯ãªã™", kanji: "<ruby>è©±<rt>ã¯ãª</rt></ruby>ã™", type: "u-verb",
      te: ["ã¯ãªã—ã¦","è©±ã—ã¦"], masu: ["ã¯ãªã—ã¾ã™","è©±ã—ã¾ã™"], meaning: "to speak; to talk", lesson: 3},
      {dict: "ã¯ã‚‰ã†", kanji: "<ruby>æ‰•<rt>ã¯ã‚‰</rt></ruby>ã†", type: "u-verb",
      te: ["ã¯ã‚‰ã£ã¦","æ‰•ã£ã¦"], masu: ["ã¯ã‚‰ã„ã¾ã™","æ‰•ã„ã¾ã™"], meaning: "to pay"},
      {dict: "ã²ã", kanji: "<ruby>å¼¾<rt>ã²</rt></ruby>ã", type: "u-verb",
      te: ["ã²ã„ã¦","å¼¾ã„ã¦"], masu: ["ã²ãã¾ã™","å¼¾ãã¾ã™"], meaning: "to play (a string instrument or piano) (~ã‚’)", lesson: 9},
      {dict: "ã‚‚ã¤", kanji: "<ruby>æŒ<rt>ã‚‚</rt></ruby>ã¤", type: "u-verb",
      te: ["ã‚‚ã£ã¦","æŒã£ã¦"], masu: ["ã‚‚ã¡ã¾ã™","æŒã¡ã¾ã™"], meaning: "to hold"},
      {dict: "ã‚„ã™ã‚€", kanji: "<ruby>ä¼‘<rt>ã‚„ã™</rt></ruby>ã‚€", type: "u-verb",
      te: ["ã‚„ã™ã‚“ã§","ä¼‘ã‚“ã§"], masu: ["ã‚„ã™ã¿ã¾ã™","ä¼‘ã¿ã¾ã™"], meaning: "to be absent (from...) (~ã‚’); to rest", lesson: 6},
      {dict: "ã‚ˆã‚€", kanji: "<ruby>èª­<rt>ã‚ˆ</rt></ruby>ã‚€", type: "u-verb",
      te: ["ã‚ˆã‚“ã§","èª­ã‚“ã§"], masu: ["ã‚ˆã¿ã¾ã™","èª­ã¿ã¾ã™"], meaning: "to read", lesson: 3},
      {dict: "ã‹ãˆã‚‹", kanji: "<ruby>å¸°<rt>ã‹ãˆ</rt></ruby>ã‚‹", type: "u-verb",
      te: ["ã‹ãˆã£ã¦","å¸°ã£ã¦"], masu: ["ã‹ãˆã‚Šã¾ã™","å¸°ã‚Šã¾ã™"], meaning: "to go back; to return", lesson: 3},
      {dict: "ã¾ã¤", kanji: "<ruby>å¾…<rt>ã¾</rt></ruby>ã¤", type: "u-verb",
      te: ["ã¾ã£ã¦","å¾…ã£ã¦"], masu: ["ã¾ã¡ã¾ã™","å¾…ã¡ã¾ã™"], meaning: "to wait (~ã‚’)", lesson: 4},
      {dict: "ã‚ã‹ã‚‹", kanji: "<ruby>åˆ†<rt>ã‚</rt></ruby>ã‹ã‚‹", type: "u-verb",
      te: ["ã‚ã‹ã£ã¦","åˆ†ã‹ã£ã¦"], masu: ["ã‚ã‹ã‚Šã¾ã™","åˆ†ã‹ã‚Šã¾ã™"], meaning: "to understand (~ãŒ)", lesson: 4},
      {dict: "ã‚„ã‚‹", type: "u-verb",
      te: ["ã‚„ã£ã¦"], masu: ["ã‚„ã‚Šã¾ã™"], meaning: "to to do; to perform (~ã‚’)", lesson: 5},
      {dict: "ã‚¿ãƒã‚³ã‚’ã™ã†", kanji: "ã‚¿ãƒã‚³ã‚’<ruby>å¸<rt>ã™</rt></ruby>ã†", type: "u-verb",
      te: ["ã‚¿ãƒã‚³ã‚’ã™ã£ã¦","ã‚¿ãƒã‚³ã‚’å¸ã£ã¦"], masu: ["ã‚¿ãƒã‚³ã‚’ã™ã„ã¾ã™","ã‚¿ãƒã‚³ã‚’å¸ã„ã¾ã™"], meaning: "to smoke", lesson: 6},
      {dict: "ã‚‚ã¤", kanji: "<ruby>æŒ<rt>ã‚‚</rt></ruby>ã¤", type: "u-verb",
      te: ["ã‚‚ã£ã¦","æŒã£ã¦"], masu: ["ã‚‚ã¡ã¾ã™","æŒã¡ã¾ã™"], meaning: "to carry; to hold (~ã‚’)", lesson: 6},
      {dict: "ã™ã‚€", kanji: "<ruby>ä½<rt>ã™</rt></ruby>ã‚€", type: "u-verb",
      te: ["ã™ã‚“ã§","ä½ã‚“ã§"], masu: ["ã™ã¿ã¾ã™","ä½ã¿ã¾ã™"], meaning: "to live (~ã‚‚ã™ã‚“ã§ã„ã¾ã™)", lesson: 7},
      {dict: "ã‚ã‚‰ã†", kanji: "<ruby>æ´—<rt>ã‚</rt></ruby>ã‚‰ã†", type: "u-verb",
      te: ["ã‚ã‚‰ã£ã¦","æ´—ã£ã¦"], masu: ["ã‚ã‚‰ã„ã¾ã™","æ´—ã„ã¾ã™"], meaning: "to wash (~ã‚’)", lesson: 8},
      {dict: "ã„ã‚‹", type: "u-verb",
      te: ["ã„ã£ã¦"], masu: ["ã„ã‚Šã¾ã™"], meaning: "to need (~ãŒ)", lesson: 8},
      {dict: "ãŠãããªã‚‹", kanji: "<ruby>é…<rt>ãŠã</rt></ruby>ããªã‚‹", type: "u-verb",
      te: ["ãŠãããªã£ã¦","é…ããªã£ã¦"], masu: ["ãŠãããªã‚Šã¾ã™","é…ããªã‚Šã¾ã™"], meaning: "to be late", lesson: 8},
      {dict: "ãŠãµã‚ã«ã¯ã„ã‚‹", kanji: "ãŠ<ruby>é¢¨å‘‚<rt>ãµã‚</rt></ruby>ã«<ruby>å…¥<rt>ã¯ã„</rt></ruby>ã‚‹", type: "u-verb",
      te: ["ãŠãµã‚ã«ã¯ã„ã£ã¦","ãŠé¢¨å‘‚ã«å…¥ã£ã¦"], masu: ["ãŠãµã‚ã«ã¯ã„ã‚‹ã¾ã™","ãŠé¢¨å‘‚ã«å…¥ã‚Šã¾ã™"], meaning: "to take a bath", lesson: 8},
      {dict: "ãŠã‚‚ã†", kanji: "<ruby>æ€<rt>ãŠã‚‚</rt></ruby>ã†", type: "u-verb",
      te: ["ãŠã‚‚ã£ã¦","æ€ã£ã¦"], masu: ["ãŠã‚‚ã„ã¾ã™","æ€ã„ã¾ã™"], meaning: "to think", lesson: 8},
      {dict: "ãã‚‹", kanji: "<ruby>åˆ‡<rt>ã</rt></ruby>ã‚‹", type: "u-verb",
      te: ["ãã£ã¦","åˆ‡ã£ã¦"], masu: ["ãã‚Šã¾ã™","åˆ‡ã‚Šã¾ã™"], meaning: "to cut (~ã‚’)", lesson: 8},
      {dict: "ã¤ãã‚‹", kanji: "<ruby>ä½œ<rt>ã¤ã</rt></ruby>ã‚‹", type: "u-verb",
      te: ["ã¤ãã£ã¦","ä½œã£ã¦"], masu: ["ã¤ãã‚Šã¾ã™","ä½œã‚Šã¾ã™"], meaning: "to make (~ã‚’)", lesson: 8},
      {dict:"(ã‚ã‚/ã‚†ããŒ)ãµã‚‹", kanji:"<ruby>é›¨<rt>ã‚ã‚</rt></ruby>/<ruby>é›ª<rt>ã‚†ã</rt></ruby>ãŒ<ruby>é™<rt>ãµ</rt></ruby>ã‚‹", type:"u-verb",
      te:["ãµã£ã¦","é™ã£ã¦"], masu:["ãµã‚Šã¾ã™","é™ã‚Šã¾ã™"], meaning:"(rain/snow) falls", lesson: 8},
      {dict: "ã‚‚ã£ã¦ã„ã", kanji: "<ruby>æŒ<rt>ã‚‚</rt></ruby>ã£ã¦ã„ã", type: "u-verb",
      te: ["ã‚‚ã£ã¦ã„ã£ã¦","æŒã£ã¦ã„ã£ã¦"], masu: ["ã‚‚ã£ã¦ã„ãã¾ã™","æŒã£ã¦ã„ãã¾ã™"], meaning: "to take (a thing) (~ã‚’)", lesson: 8},
      {dict: "ãã™ã‚Šã‚’ã®ã‚€", kanji: "<ruby>è–¬<rt>ãã™ã‚Š</rt></ruby>ã‚’<ruby>é£²<rt>ã®</rt></ruby>ã‚€", type: "u-verb",
      te: ["ãã™ã‚Šã‚’ã®ã‚“ã§","è–¬ã‚’é£²ã‚“ã§"], masu: ["ãã™ã‚Šã‚’ã®ã¿ã¾ã™","è–¬ã‚’é£²ã¿ã¾ã™"], meaning: "to take medicine", lesson: 9},
      {dict: "ã«ã‚“ããŒã‚ã‚‹", kanji: "<ruby>äººæ°—<rt>ã«ã‚“ã</rt></ruby>ãŒã‚ã‚‹", type: "u-verb",
      te: ["ã«ã‚“ããŒã‚ã£ã¦","äººæ°—ãŒã‚ã£ã¦"], masu: ["ã«ã‚“ããŒã‚ã‚Šã¾ã™","äººæ°—ãŒã‚ã‚Šã¾ã™"], meaning: "to be popular", lesson: 9},
      {dict: "ã¯ã˜ã¾ã‚‹", kanji: "<ruby>å§‹<rt>ã¯ã˜</rt></ruby>ã¾ã‚‹", type: "u-verb",
      te: ["ã¯ã˜ã¾ã£ã¦","å§‹ã¾ã£ã¦"], masu: ["ã¯ã˜ã¾ã‚Šã¾ã™","å§‹ã¾ã‚Šã¾ã™"], meaning: "something begins (~ãŒ)", lesson: 9},
      {dict: "ã‚‚ã‚‰ã†", type: "u-verb",
      te: ["ã‚‚ã‚‰ã„ã¦"], masu: ["ã‚‚ã‚‰ã„ã¾ã™"], meaning: "to get (from somebody) (person ã« thing ã‚’)", lesson: 9},
      {dict: "ã‹ã‹ã‚‹", type: "u-verb",
      te: ["ã‹ã‹ã£ã¦"], masu: ["ã‹ã‹ã‚Šã¾ã™"], meaning: "to take (amount of time/money) (no particle)", lesson: 10},
      {dict: "ã¨ã¾ã‚‹", kanji: "<ruby>æ³Š<rt>ã¨</rt></ruby>ã¾ã‚‹", type: "u-verb",
      te: ["ã¨ã¾ã£ã¦","æ³Šã¾ã£ã¦"], masu: ["ã¨ã¾ã‚Šã¾ã™","æ³Šã¾ã‚Šã¾ã™"], meaning: "to stay (at a hotel, etc.) (~ã«)", lesson: 10},
      {dict: "ãªã‚‹", type: "u-verb",
      te: ["ãªã£ã¦"], masu: ["ãªã‚Šã¾ã™"], meaning: "to become", lesson: 10},
      {dict: "ã†ãã‚’ã¤ã", type: "u-verb",
      te: ["ã†ãã‚’ã¤ã„ã¦"], masu: ["ã†ãã‚’ã¤ãã¾ã™"], meaning: "to tell a lie", lesson: 10},
      
      // ==== Ru-verbs ====
      {dict: "ã‚ã‘ã‚‹", kanji: "<ruby>é–‹<rt>ã‚</rt></ruby>ã‘ã‚‹", type: "ru-verb",
      te: ["ã‚ã‘ã¦","é–‹ã‘ã¦"], masu: ["ã‚ã‘ã¾ã™","é–‹ã‘ã¾ã™"], meaning: "to open (something) (~ã‚’)", lesson: 6},
      {dict: "ã‚ã’ã‚‹", kanji: "<ruby>ä¸Š<rt>ã‚</rt></ruby>ã’ã‚‹", type: "ru-verb",
      te: ["ã‚ã’ã¦","ä¸Šã’ã¦"], masu: ["ã‚ã’ã¾ã™","ä¸Šã’ã¾ã™"], meaning: "to give"},
      {dict: "ãŠãã‚‹", kanji: "<ruby>èµ·<rt>ãŠ</rt></ruby>ãã‚‹", type: "ru-verb",
      te: ["ãŠãã¦","èµ·ãã¦"], masu: ["ãŠãã¾ã™","èµ·ãã¾ã™"], meaning: "to get up", lesson: 3},
      {dict: "ãŠã—ãˆã‚‹", kanji: "<ruby>æ•™<rt>ãŠã—</rt></ruby>ãˆã‚‹", type: "ru-verb",
      te: ["ãŠã—ãˆã¦","æ•™ãˆã¦"], masu: ["ãŠã—ãˆã¾ã™","æ•™ãˆã¾ã™"], meaning: "to teach; to instruct (person ã« thing ã‚’)", lesson: 6},
      {dict: "ãŠã‚Šã‚‹", kanji: "<ruby>é™<rt>ãŠ</rt></ruby>ã‚Šã‚‹", type: "ru-verb",
      te: ["ãŠã‚Šã¦","é™ã‚Šã¦"], masu: ["ãŠã‚Šã¾ã™","é™ã‚Šã¾ã™"], meaning: "to get off (~ã‚’)", lesson: 6},
      {dict: "ã‹ã‘ã‚‹", kanji: "<ruby>æ›<rt>ã‹</rt></ruby>ã‘ã‚‹", type: "ru-verb",
      te: ["ã‹ã‘ã¦","æ›ã‘ã¦"], masu: ["ã‹ã‘ã¾ã™","æ›ã‘ã¾ã™"], meaning: "to put on (glasses)", lesson: 7},
      {dict: "ã‹ã‚Šã‚‹", kanji: "<ruby>å€Ÿ<rt>ã‹</rt></ruby>ã‚Šã‚‹", type: "ru-verb",
      te: ["ã‹ã‚Šã¦","å€Ÿã‚Šã¦"], masu: ["ã‹ã‚Šã¾ã™","å€Ÿã‚Šã¾ã™"], meaning: "to borrow (person ã« thing ã‚’", lesson: 6},
      {dict: "ãã‚‹", kanji: "<ruby>ç€<rt>ã</rt></ruby>ã‚‹", type: "ru-verb",
      te: ["ãã¦","ç€ã¦"], masu: ["ãã¾ã™","ç€ã¾ã™"], meaning: "to wear"},
      {dict: "ã—ã‚ã‚‹", kanji: "<ruby>é–‰<rt>ã—</rt></ruby>ã‚ã‚‹", type: "ru-verb",
      te: ["ã—ã‚ã¦","é–‰ã‚ã¦"], masu: ["ã—ã‚ã¾ã™","é–‰ã‚ã¾ã™"], meaning: "to close (something) (~ã‚’)", lesson: 6},
      {dict: "ã¤ã‘ã‚‹", kanji: "ã¤ã‘ã‚‹", type: "ru-verb",
      te: ["ã¤ã‘ã¦"], masu: ["ã¤ã‘ã¾ã™"], meaning: "to turn on"},
      {dict: "ã§ã‹ã‘ã‚‹", kanji: "<ruby>å‡º<rt>ã§</rt></ruby>ã‹ã‘ã‚‹", type: "ru-verb",
      te: ["ã§ã‹ã‘ã¦","å‡ºã‹ã‘ã¦"], masu: ["ã§ã‹ã‘ã¾ã™","å‡ºã‹ã‘ã¾ã™"], meaning: "to go out", lesson: 5},
      {dict: "ã§ã‚‹", kanji: "<ruby>å‡º<rt>ã§</rt></ruby>ã‚‹", type: "ru-verb",
      te: ["ã§ã¦","å‡ºã¦"], masu: ["ã§ã¾ã™","å‡ºã¾ã™"], meaning: "to leave"},
      {dict: "ã­ã‚‹", kanji: "<ruby>å¯<rt>ã­</rt></ruby>ã‚‹", type: "ru-verb",
      te: ["ã­ã¦","å¯ã¦"], masu: ["ã­ã¾ã™","å¯ã¾ã™"], meaning: "to sleep", lesson: 3},
      {dict: "ã¿ã‚‹", kanji: "<ruby>è¦‹<rt>ã¿</rt></ruby>ã‚‹", type: "ru-verb",
      te: ["ã¿ã¦","è¦‹ã¦"], masu: ["ã¿ã¾ã™","è¦‹ã¾ã™"], meaning: "to see; to look at; to watch", lesson: 3},
      {dict: "ã‚ã™ã‚Œã‚‹", kanji: "<ruby>å¿˜<rt>ã‚ã™</rt></ruby>ã‚Œã‚‹", type: "ru-verb",
      te: ["ã‚ã™ã‚Œã¦","å¿˜ã‚Œã¦"], masu: ["ã‚ã™ã‚Œã¾ã™","å¿˜ã‚Œã¾ã™"], meaning: "to forget; to leave behind (~ã‚’)", lesson: 6},
      {dict: "ã‚·ãƒ£ãƒ¯ãƒ¼ã‚’ã‚ã³ã‚‹", kanji: "ã‚·ãƒ£ãƒ¯ãƒ¼ã‚’ã‚ã³ã‚‹", type: "ru-verb",
      te: ["ã‚·ãƒ£ãƒ¯ãƒ¼ã‚’ã‚ã³ã¦"], masu: ["ã‚·ãƒ£ãƒ¯ãƒ¼ã‚’ã‚ã³ã¾ã™"], meaning: "to take a shower", lesson: 6},
      {dict: "ã‚„ã›ã‚‹", kanji: "ã‚„ã›ã‚‹", type: "ru-verb",
      te: ["ã‚„ã›ã¦"], masu: ["ã‚„ã›ã¾ã™"], meaning: "to lose weight", lesson: 7},
      {dict: "ãŸã¹ã‚‹", kanji: "<ruby>é£Ÿ<rt>ãŸ</rt></ruby>ã¹ã‚‹", type: "ru-verb",
      te: ["ãŸã¹ã¦","é£Ÿã¹ã¦"], masu: ["ãŸã¹ã¾ã™","é£Ÿã¹ã¾ã™"], meaning: "to eat", lesson: 3},
      {dict: "ã„ã‚‹", type: "ru-verb",
      te: ["ã„ã¦"], masu: ["ã„ã¾ã™"], meaning: "(a person) is in ...; stays at... (place ã« person ãŒ)", lesson: 4},
      {dict: "ãã‚‹", kanji: "<ruby>ç€<rt>ã</rt></ruby>ã‚‹", type: "ru-verb",
      te: ["ãã¦","ç€ã¦"], masu: ["ãã¾ã™","ç€ã¾ã™"], meaning: "to put on (clothes above your waist) (~ã‚’)", lesson: 7},
      {dict: "ã‚„ã›ã‚‹", type: "ru-verb",
      te: ["ã‚„ã›ã¦"], masu: ["ã‚„ã›ã¾ã™"], meaning: "to be thin", lesson: 7},
      {dict: "ã™ã¦ã‚‹", kanji: "<ruby>æ¨<rt>ã™</rt></ruby>ã¦ã‚‹", type: "ru-verb",
      te: ["ã™ã¦ã¦","æ¨ã¦ã¦"], masu: ["ã™ã¦ã¾ã™","æ¨ã¦ã¾ã™"], meaning: "to throw away (~ã‚’)", lesson: 8},
      {dict: "ã¯ã˜ã‚ã‚‹", kanji: "<ruby>å§‹<rt>ã¯ã˜</rt></ruby>ã‚ã‚‹", type: "ru-verb",
      te: ["ã¯ã˜ã‚ã¦","å§‹ã‚ã¦"], masu: ["ã¯ã˜ã‚ã¾ã™","å§‹ã‚ã¾ã™"], meaning: "to begin (~ã‚’)", lesson: 8},
      {dict: "ãã‚ã‚‹", kanji: "<ruby>æ±º<rt>ã</rt></ruby>ã‚ã‚‹", type: "ru-verb",
      te: ["ãã‚ã¦","æ±ºã‚ã¦"], masu: ["ãã‚ã¾ã™","æ±ºã‚ã¾ã™"], meaning: "to decide (~ã‚’)", lesson: 10},

      // ==== Irregular ====
      {dict: "ãã‚‹", kanji: "<ruby>æ¥<rt>ã</rt></ruby>ã‚‹", type: "irregular",
      te: ["ãã¦","æ¥ã¦"], masu: ["ãã¾ã™","æ¥ã¾ã™"], meaning: "to come", lesson: 3},
      {dict: "ã™ã‚‹", kanji: "ã™ã‚‹", type: "irregular",
      te: ["ã—ã¦"], masu: ["ã—ã¾ã™"], meaning: "to do", lesson: 3},
      {dict: "ã¹ã‚“ãã‚‡ã†ã™ã‚‹", kanji: "<ruby>å‹‰å¼·<rt>ã¹ã‚“ãã‚‡ã†</rt></ruby>ã™ã‚‹", type: "irregular",
      te: ["ã¹ã‚“ãã‚‡ã†ã—ã¦","å‹‰å¼·ã—ã¦"], masu: ["ã¹ã‚“ãã‚‡ã†ã—ã¾ã™","å‹‰å¼·ã—ã¾ã™"], meaning: "to study", lesson: 3},
      {dict: "ã‘ã£ã“ã‚“ã™ã‚‹", kanji: "<ruby>çµå©š<rt>ã‘ã£ã“ã‚“</rt></ruby>ã™ã‚‹", type: "irregular",
      te: ["ã‘ã£ã“ã‚“ã—ã¦","çµå©šã—ã¦"], masu: ["ã‘ã£ã“ã‚“ã—ã¾ã™","çµå©šã—ã¾ã™"], meaning: "to get married (~ã¨)", lesson: 7},
      {dict: "ã•ã‚“ã½ã™ã‚‹", kanji: "<ruby>æ•£æ­©<rt>ã•ã‚“ã½</rt></ruby>ã™ã‚‹", type: "irregular",
      te: ["ã•ã‚“ã½ã—ã¦","æ•£æ­©ã—ã¦"], masu: ["ã•ã‚“ã½ã—ã¾ã™","æ•£æ­©ã—ã¾ã™"], meaning: "to take a walk", lesson: 9},
      {dict: "ã†ã‚“ã¦ã‚“ã™ã‚‹", kanji: "<ruby>é‹è»¢<rt>ã†ã‚“ã¦ã‚“</rt></ruby>ã™ã‚‹", type: "irregular",
      te: ["ã†ã‚“ã¦ã‚“ã—ã¦","é‹è»¢ã—ã¦"], masu: ["ã†ã‚“ã¦ã‚“ã—ã¾ã™","é‹è»¢ã—ã¾ã™"], meaning: "to drive (~ã‚’)", lesson: 8},
      {dict: "ã‚Šã‚‡ã“ã†ã™ã‚‹", kanji: "<ruby>æ—…è¡Œ<rt>ã‚Šã‚‡ã“ã†</rt></ruby>ã™ã‚‹", type: "irregular",
      te: ["ã‚Šã‚‡ã“ã†ã—ã¦","æ—…è¡Œã—ã¦"], masu: ["ã‚Šã‚‡ã“ã†ã—ã¾ã™","æ—…è¡Œã—ã¾ã™"], meaning: "to travel", lesson: 10},
      {dict: "ãã†ã˜ã™ã‚‹", kanji: "<ruby>æƒé™¤<rt>ãã†ã˜</rt></ruby>ã™ã‚‹", type: "irregular",
      te: ["ãã†ã˜ã—ã¦","æƒé™¤ã—ã¦"], masu: ["ãã†ã˜ã—ã¾ã™","æƒé™¤ã—ã¾ã™"], meaning: "to clean (~ã‚’)", lesson: 8},
      {dict: "ã§ã‚“ã‚ã™ã‚‹", kanji: "<ruby>é›»è©±<rt>ã§ã‚“ã‚</rt></ruby>ã™ã‚‹", type: "irregular",
      te: ["ã§ã‚“ã‚ã—ã¦","é›»è©±ã—ã¦"], masu: ["ã§ã‚“ã‚ã—ã¾ã™","é›»è©±ã—ã¾ã™"], meaning: "to call (~ã«)", lesson: 6},
      {dict: "ã¤ã‚Œã¦ãã‚‹", kanji: "<ruby>é€£<rt>ã¤</rt></ruby>ã‚Œã¦ãã‚‹", type: "irregular",
      te: ["ã¤ã‚Œã¦ãã¦","é€£ã‚Œã¦ãã¦"], masu: ["ã¤ã‚Œã¦ãã¾ã™","é€£ã‚Œã¦ãã¾ã™"], meaning: "to bring (a person) (~ã‚’)", lesson: 6},
      {dict: "ã‚‚ã£ã¦ãã‚‹", kanji: "<ruby>æŒ<rt>ã‚‚</rt></ruby>ã£ã¦ãã‚‹", type: "irregular",
      te: ["ã‚‚ã£ã¦ãã¦","æŒã£ã¦ãã¦"], masu: ["ã‚‚ã£ã¦ãã¾ã™","æŒã£ã¦ãã¾ã™"], meaning: "to bring (a thing) (~ã‚’)", lesson: 6},
      {dict: "ã›ã‚“ãŸãã™ã‚‹", kanji: "<ruby>æ´—æ¿¯<rt>ã›ã‚“ãŸã</rt></ruby>ã™ã‚‹", type: "irregular",
      te: ["ã›ã‚“ãŸãã—ã¦","æ´—æ¿¯ã—ã¦"], masu: ["ã›ã‚“ãŸãã—ã¾ã™","æ´—æ¿¯ã—ã¾ã™"], meaning: "to do laundry (~ã‚’)", lesson: 8},
      {dict: "ã‚Šã‚‡ã†ã‚Šã™ã‚‹", kanji: "<ruby>æ–™ç†<rt>ã‚Šã‚‡ã†ã‚Š</rt></ruby>ã™ã‚‹", type: "irregular",
      te: ["ã‚Šã‚‡ã†ã‚Šã—ã¦","æ–™ç†ã—ã¦"], masu: ["ã‚Šã‚‡ã†ã‚Šã—ã¾ã™","æ–™ç†ã—ã¾ã™"], meaning: "to cook", lesson: 8},
      {dict: "ã†ã‚“ã©ã†ã™ã‚‹", kanji: "<ruby>é‹å‹•<rt>ã†ã‚“ã©ã†</rt></ruby>ã™ã‚‹", type: "irregular",
      te: ["ã†ã‚“ã©ã†ã—ã¦","é‹å‹•ã—ã¦"], masu: ["ã†ã‚“ã©ã†ã—ã¾ã™","é‹å‹•ã—ã¾ã™"], meaning: "to exercise", lesson: 9},
      {dict: "ã”ã‚ã”ã‚ã™ã‚‹", type: "irregular",
      te: ["ã”ã‚ã”ã‚ã—ã¦"], masu: ["ã”ã‚ã”ã‚ã—ã¾ã™"], meaning: "to chillout at home; to stay home and do nothing", lesson: 10},
      {dict: "ã‚Œã‚“ã—ã‚…ã†ã™ã‚‹", kanji: "<ruby>ç·´ç¿’<rt>ã‚Œã‚“ã—ã‚…ã†</rt></ruby>ã™ã‚‹", type: "irregular",
      te: ["ã‚Œã‚“ã—ã‚…ã†ã—ã¦","ç·´ç¿’ã—ã¦"], masu: ["ã‚Œã‚“ã—ã‚…ã†ã—ã¾ã™","ç·´ç¿’ã—ã¾ã™"], meaning: "to practice (~ã‚’)", lesson: 10}
    ];

    document.getElementById("totalVerbs").textContent = verbs.length;

    // Build lesson dropdown dynamically
    function buildLessonDropdown() {
      const lessons = new Set();
      verbs.forEach(v => {
        if (Array.isArray(v.lesson)) {
          v.lesson.forEach(l => lessons.add(l));
        } else if (v.lesson) {
          lessons.add(v.lesson);
        }
      });      
      const dropdown = document.getElementById("lessonFilter");
      dropdown.innerHTML = `<option value="all">All Lessons</option>`;
      [...lessons].sort((a, b) => a - b).forEach(l => {
        dropdown.innerHTML += `<option value="${l}">Lesson ${l}</option>`;
      });
    }

// Run it once on page load
buildLessonDropdown();


    function startQuiz() {
      document.getElementById("menu").style.display = "none";
      document.getElementById("quiz").style.display = "block";
    }

    function showList() {
      document.getElementById("menu").style.display = "none";
      document.getElementById("list").style.display = "block";
      const container = document.getElementById("verbTables");
      container.innerHTML = "";

      // Group verbs by lesson
      const grouped = {};
      verbs.forEach(v => {
        if (Array.isArray(v.lesson)) {
          v.lesson.forEach(l => {
            if (!grouped[l]) grouped[l] = [];
            grouped[l].push(v);
          });
        } else {
          if (!grouped[v.lesson]) grouped[v.lesson] = [];
          grouped[v.lesson].push(v);
        }
      });

      Object.keys(grouped).sort((a, b) => a - b).forEach(lesson => {
        const verbsForLesson = grouped[lesson];
        let table = `
          <h3 class="lesson-heading">Lesson ${lesson}</h3>
          <table class="table table-striped table-bordered">
            <thead class="table-dark">
              <tr>
                <th>Kanji</th>
                <th>Dict</th>
                <th>Te-form(s)</th>
                <th>Masu-form(s)</th>
                <th>Type</th>
                <th>Meaning</th>
              </tr>
            </thead>
            <tbody>
        `;
        verbsForLesson.forEach(v => {
          table += `
            <tr>
              <td>${v.kanji || ""}</td>
              <td>${v.dict}</td>
              <td>${v.te.join(", ")}</td>
              <td>${v.masu.join(", ")}</td>
              <td>${v.type}</td>
              <td>${v.meaning}</td>
            </tr>`;
        });
        table += "</tbody></table>";
        container.innerHTML += table;
      });
    }

    let currentQuestions = [];
    let currentType = "te";

    function generateQuiz() {
      const numInput = document.getElementById("numQuestions");
      const lesson = document.getElementById("lessonFilter").value;
      currentType = document.getElementById("quizType").value;

      let pool = verbs;

      // filter by lesson
      if (lesson !== "all") {
        pool = verbs.filter(v => 
          Array.isArray(v.lesson) ? v.lesson.includes(parseInt(lesson)) : v.lesson == lesson
        );
      }

      // skip irregulars if checked
      const skipIrregular = document.getElementById("skipIrregular").checked;
      if (skipIrregular) {
        pool = pool.filter(v => v.type !== "irregular");
      }

      // âœ… update available number dynamically
      document.getElementById("totalVerbs").textContent = pool.length;

      const num = Math.min(parseInt(numInput.value), pool.length);
      currentQuestions = shuffle([...pool]).slice(0, num);

      const form = document.getElementById("quizForm");
      form.innerHTML = "";
      currentQuestions.forEach((v, i) => {
        form.innerHTML += `
          <div class="mb-3">
            <label class="form-label">Q${i+1}: ${(v.kanji || v.dict)} (${v.meaning}) â†’ ${currentType}-form?</label>
            <input type="text" class="form-control" name="q${i}" data-answers='${JSON.stringify(v[currentType])}'>
          </div>
        `;
      });
      form.innerHTML += `<button type="submit" class="btn btn-success">Submit Answers</button>`;
    }


    function checkAnswers() {
      let score = 0;
      let output = "";
      currentQuestions.forEach((v, i) => {
        const input = document.querySelector(`[name=q${i}]`);
        const userAnswer = input.value.trim();
        const validAnswers = JSON.parse(input.getAttribute("data-answers"));
        if (validAnswers.includes(userAnswer)) {
          score++;
          output += `
            <div class="alert alert-success">
              âœ… Q${i+1}: Correct! <br>
              Your answer: <b>${userAnswer}</b><br>
              Acceptable answers: ${validAnswers.join(", ")} (${v.type})
            </div>`;
        } else {
          output += `
            <div class="alert alert-danger">
              âŒ Q${i+1}: Incorrect <br>
              Your answer: <b>${userAnswer}</b><br>
              Acceptable answers: ${validAnswers.join(", ")} (${v.type})
            </div>`;
        }
      });
      output += `<p class="fw-bold">Final Score: ${score}/${currentQuestions.length}</p>`;

      document.getElementById("quiz").style.display = "none";
      document.getElementById("results").style.display = "block";
      document.getElementById("resultsContent").innerHTML = output;
    }

    function reset() {
      document.getElementById("quiz").style.display = "none";
      document.getElementById("results").style.display = "none";
      document.getElementById("list").style.display = "none";
      document.getElementById("menu").style.display = "block";
    }

    // Fisher-Yates shuffle
    function shuffle(array) {
      let m = array.length, t, i;
      while (m) {
        i = Math.floor(Math.random() * m--);
        t = array[m]; array[m] = array[i]; array[i] = t;
      }
      return array;
    }
  </script>
</body>
</html>
